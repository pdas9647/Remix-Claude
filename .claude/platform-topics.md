# Platform Topics — Builder Mechanics & Advanced Features

> Parent: Remix Documentation > User Guides and Tutorials > Topics
> Source pages linked per section below.

---

## Web Components

> Source: [Web Components](https://www.notion.so/1141d464528f8056a818e8b84c9c10d6)
> GitHub: https://github.com/remixlabs/web-components

Web components deployed to a catalog and inserted like any other component (no resource imports needed).

### manifest.json Format

| Field       | Required     | Description                                                   |
|-------------|--------------|---------------------------------------------------------------|
| `tag`       | Yes          | HTML tag name (e.g. `emoji-picker`)                           |
| `ins`       | No           | Array of input bindings (each: `{name, type, defaultValue?}`) |
| `events`    | No           | Array of out bindings (each: `{name, payload?}`)              |
| `url`       | Yes (hosted) | URL of the .js file                                           |
| `thumbnail` | No           | URL of preview image (png/jpg)                                |
| `module`    | No           | Whether to import as ES6 module (default: false)              |
| `slots`     | No           | `{type: "NoSlots"}`, `{type: "SingleSlot", param: bool}`      |

**Field types for `ins` / `events`:** `string`, `number`, `bool`, `date`, `color`, `url`, `image`, `icon`, `ref`, `email`, `card`, `event`, `location`, `data`, `entity`, `binary`, `{}` (object),
`["string"]` etc. (arrays)

### Directory Convention

```
/webcomps/<name>/<version>/manifest.json
/webcomps/<name>/<version>/thumbnail.png
/webcomps/<name>/<version>/<name>.js
```

Remix libraries use `agt.files.remix.app/remix-libraries/files/webcomps/...`

### In Studio Setup

Three options when inserting a new web component node:

- **url** — URL of manifest.json (recommended)
- **manifest** — paste full JSON directly
- **resource** — .zip file in Files module (old way, being deprecated)

Once manifest is fetched, node behaves like any other (in/out bindings shown). `Edit` takes you back to setup UI.

### Publishing & Updating

- Publish to library like any other node (ideally same workspace as manifest/js files)
- To update: upload to new version folder (e.g. `v2/`) → edit node manifest URL → "update source" in footer
- Hot patches: can overwrite same version location without requiring node sync by users

### Slots

| Value                                 | Meaning                               |
|---------------------------------------|---------------------------------------|
| `{type: "NoSlots"}`                   | No slots                              |
| `{type: "SingleSlot", param: true}`   | Single slot accepting a list of cards |
| `{type: "SingleSlot", param: false}`  | Single slot accepting a single card   |
| `{type: "MultiSlot", param: [names]}` | Not yet implemented                   |

---

## Wasm Functions

> Source: [Wasm Functions](https://www.notion.so/1191d464528f803e8538d6d0783b58a1)
> GitHub: https://github.com/remixlabs/wasm-functions
> Note: V2 manifest format coming — [preview page](https://www.notion.so/1201d464528f80c19d57de54cccc717d)

WASM/WASI functions deployed to catalog, inserted like components (no resource imports needed).

### Directory Convention

```
/wasm/<name>/<version>/manifest.json
/wasm/<name>/<version>/<name>.wasm
```

### manifest.json Format (Rust)

Auto-generated by `mixer wasm build` from Cargo.toml + `#[remix::bind]` annotations:

```json
{
  "name": "qr_code",
  "description": "Generates QR code binary for a provided URL",
  "functions": [
    {
      "name": "qr_code",
      "arguments": [
        {
          "name": "url",
          "builder_type": "string"
        }
      ],
      "builder_type_return": "binary",
      "doc": [
        "Generates QR code binary for a provided URL"
      ]
    }
  ],
  "url": "https://agt.files.remix.app/remix-libraries/files/wasm/qr_code/v1/qr_code.wasm"
}
```

### manifest.json Format (Other Languages — WASI stdin/out)

```json
{
  "name": "uppercase",
  "description": "A simple JS wasm function to uppercase a string",
  "url": "https://agt.files.remix.app/remix-libraries/files/wasm/uppercase/v1/uppercase.wasm"
}
```

Other languages use stdin/out for params (JSON encoding recommended). Test with [wasmtime](https://wasmtime.dev/).

### In Studio Setup

Same 3 options as web components: `url`, `manifest`, `resource` (deprecated). Select function if wasm exposes multiple. Then behaves like any other node.

### Publishing & Updating

Same pattern as web components: publish to library → update by uploading new version folder → edit manifest URL → "update source".

---

## Working with Files from Users

> Source: [Working with files from users](https://www.notion.so/1191d464528f8032b146ed778c80c2e6)

Two-stage process to handle user-provided files:

### Stage 1 — Receive the File (→ Local File type)

Use two special card elements:

- **Drag-and-drop handler** — main component; provides `Local File` output from drag-and-drop
- **File input button** — opens OS file explorer (input type="file")

Both produce a `Local File` type value in Remix.

### Stage 2 — Upload the Local File

| Method                       | How                                                                                  | When to Use                    |
|------------------------------|--------------------------------------------------------------------------------------|--------------------------------|
| **API node**                 | Toggle "upload directly from client" in API node UI; set body to expect `Local File` | Third-party storage (S3, etc.) |
| **Upload File action**       | Special action node set to expect `Local File`                                       | Remix Files area               |
| **Inject Local File action** | Returns file content as `String`                                                     | Small text files (CSV, etc.)   |

**Note:** For performance, don't include large files in screen state — upload directly from client.

### Display File Details

Use a **LocalFile Node** to show file metadata (name, size, etc.) to the user.

---

## Cloud Agent Pubsub

> Source: [Cloud agent pubsub](https://www.notion.so/98f0325a059c4b31a0003fad4c364169)

Apps can subscribe to **topics published from cloud agents** via 3 new cloud topic options. This enables real-time push from server to client app. Re-fetch Notion page for the video walkthrough.

---

## Component Overriding

> Source: [Component overriding](https://www.notion.so/8d23c22ea59c4117951d9c535c8965b7)

Allows parameterizing components within a screen — swapping out an inner component with a configurable alternative.

### Constraints

- Components subject to overriding **cannot have Event type in/out bindings**

### Setup

1. In the component footer menu: mark the inner node as **"overridable"**
2. In the replacement component footer menu: mark it as **"callable"**
3. Connect the screen to wire the callable component into the overridable slot

Re-fetch Notion page for video walkthrough.

---

## Permissions Management

> Source: [Permissions management](https://www.notion.so/11b1d464528f80ceb963f650386dde34)
> Sub-page: [Make individual screens available to all users](https://www.notion.so/1111d464528f80b8a505c8668f0c726f)

### Screen-Level Anonymous Access

> See also: [Enable anonymous access](https://www.notion.so/14c1d464528f8079b1bcd79c5fdbf4c6)

By default, login is required to run any screen. You can now **set per-screen** whether anonymous users can access it.

- Enables apps with mixed public/protected flows
- Anonymous users accessing restricted screens are prompted to log in
- Set anonymous via the **footer menu** on the screen node; anonymous screens show a **green marker**

**Transition from anonymous to logged-in:**

- Uses a screen called `_rmx_auth` — a default implementation is provided by the builder
- You can create a custom `_rmx_auth` screen (example in catalog — TBD)
- Must implement the `remix/user-signin` **Client Action** (example in source of `https://remixlabs.com/run.html`)

**Note:** Builder emulation of anonymous access is incomplete (Amp permissions model differs from .remix files) — test with `https://remixlabs.com/run.html` instead

---

## Public, Private and Ephemeral Files

> Source: [Public, Private and Ephemeral Files](https://www.notion.so/14b1d464528f8074820dcfd0b3e6c72c)
> See also: stdlib module (Cloud Agent Server docs)

Three file privacy levels based on path prefix:

| Type          | Path Prefix                              | URL Expiry                     | Notes                       |
|---------------|------------------------------------------|--------------------------------|-----------------------------|
| **Private**   | anything not `/public/` or `/ephemeral/` | Signed, expires                | Re-generated on each access |
| **Ephemeral** | `/ephemeral/`                            | Signed, expires + auto-deleted | For temporary transfers     |
| **Public**    | `/public/`                               | Never expires                  | Safe to use anywhere        |

**Key rules:**

- Signed URLs for private/ephemeral files: new URL generated on every access from an agent → **do not store these URLs** (won't work after expiry)
- Secrets are environment-specific (not shared across workspaces, servers, or devices)

**Use cases:**

- Private: confidential PDFs, .remix files with API secrets, images not to be web-indexed
- Ephemeral: temporary file sharing between Desktop and Mobile
- Public: freely accessible assets

---

## Storing Secrets and Tokens

> Source: [Storing secrets and tokens](https://www.notion.so/1961d464528f80d6883fffbf05c34d56)

Two secure storage types, managed by the stdlib `secrets` module:

| Type        | Created By            | How to Access                                  |
|-------------|-----------------------|------------------------------------------------|
| **Secrets** | User applications     | `secrets.set(_, "key", value)` / `secrets.get` |
| **Tokens**  | 3rd-party OAuth flows | `secrets.getToken("plugin_name")`              |

Both are **tied to the specific user** and encrypted with a platform-managed key.

**Storage by runtime:**

- Platform server / agent server: encrypted in DB, keys stored separately
- Client-side (browser): both in local storage → use with caution

### Common Patterns

**Single-user API key:** Build a screen to enter the value → `secrets.set` → retrieve later with `secrets.get` (or via a dedicated agent on agent servers).

**Single-user OAuth token:**

1. Configure auth plugin on platform server (e.g. `auth.remixlabs.com`)
2. Redirect user through sign-in flow → token captured
3. Retrieve: `secrets.getToken("salesforce")`

**OAuth token in cloud agent or browser runtime:**

- Run auth flow through platform server → get token via endpoint:
  `GET https://auth.remixlabs.com/a/x/auth/{plugin_name}/originalToken`
- Authenticated with normal Remix token; platform server handles refresh

**Shared secrets** (no great built-in solution):

1. Store in DB with normal access control
2. Use an anonymous link to an agent that uses the secret
3. Explicit sharing scheme (pubsub, etc.)

**Important:** Don't store secrets in builder assets — they're saved as plain DB records and copied across projects.

**See also (referenced pages):**

- [Secrets stdlib module docs](https://www.notion.so/1061d464528f8147ae05db232fdd6db9)
- [Auth plugin configuration](https://www.notion.so/11f1d464528f8070b010f945a0b0e7af)
- [Anonymous link endpoint docs](https://www.notion.so/1061d464528f81d9b074cf5fd60bc600#9eda9a7acf88443793f42ca6d29d441e)
- [originalToken endpoint docs](https://www.notion.so/1061d464528f80449377e6c07e72b30b#f94fcdb0b6a444918ab2887366963181)

---

## Preview .remix File

> Source: [Preview .remix file](https://www.notion.so/10c1d464528f8025926ff046b12d5605)
> Image-only page (screenshot showing preview feature). Re-fetch for visual.

---

## Mixed Auth

> Source: [Mixed Auth](https://www.notion.so/1741d464528f808cbb5ff371d571c437)
> Sub-page: [Mixed auth test](https://www.notion.so/1b91d464528f802ebf9efe3417f1ea6f) — embedded test previews only (Dev/Beta/Prod), no stable content
> Parent: Remix Studio User Guide

**Key rule:** You need a **different `_rmx_auth`** for fullscreen vs embedded cases.

See also: [Enable anonymous access](https://www.notion.so/14c1d464528f8079b1bcd79c5fdbf4c6) for marking screens as anonymous.

### Full Screen (working)

Use `rmx-app-record` + `rmx-fullscreen` code (as deployed on remix.app).

**`_rmx_auth` setup:**

- A default `_rmx_auth` module is built automatically
- To customize: copy from `https://remix-dev.remixlabs.com/e/edit/builder-examples/_rmx_auth` → edit styling, add other login options, etc.
- Future: `_rmx_auth` screen versions will be in the catalog

### Embedded

Example: `https://remix-dev.remixlabs.com/e/edit/builder-examples/_rmx_auth_1`

### Fullscreen-Embedded Case

Implement mixed auth with `rmx-remix` web component when you own the host page. Host page pattern:

```javascript
<rmx-remix src="http://localhost:3100/r/assets/anon-app.remix"></rmx-remix>
<script type="module">
  import * as auth from "../../shared/assets/auth.js";
  const app = document.querySelector("rmx-remix");
  const urlParams = new URLSearchParams(window.location.search);
  const isUpgradeToken = !!urlParams.get("_rmx_upgrade_token");
  if (window.location.hash.includes("token") && isUpgradeToken) {
    // Handle auth redirect — posts token to browser channel
    auth.handleSignedInRedirect();
} else {
    app.addRemixEventListener("remix/user-signin", (args, cb) => {
      auth.handleUserSignin(null, (token) => cb(token));
    });
}
</script>
```

---

## Macros

> Source: [Macros](https://www.notion.so/2161d464528f801f8ddaf479d816d99f)
> Parent: Remix Studio User Guide
> Sub-page: [Make Agent macro details](https://www.notion.so/1f11d464528f80d7b7fbfba55aecd426)

Commands executed by the builder — programmatic remote control (create nodes, connect bindings, etc.).

### Invocation Methods

**1. Individual macro tiles** — Action tiles found in the new node menu → `Action` tab. Each tile: `invoke` binding (in), `next` binding (out), `error` binding (out). Chain with `next`.

**2. Mix-based MacroRunner** — Function tile produces a `List Object` of macro commands → passed to `MacroRunner` action tile → runs sequentially.

### Macro Tiles

| Tile                     | Description                                                                                                                                                                                                                    |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Node Search**          | Triggers library sidebar search; user selects asset. Bindings: `type` (all\|card\|data\|query\|decision\|function\|action\|annotation), optional lib/tag filters. Returns: `{name, source, displayType, metadata, collection}` |
| **Reload Graph**         | At L1: re-reads DB + refreshes view (e.g. after git pull)                                                                                                                                                                      |
| **Screen Search**        | Sidebar search for screen assets. `type`: all\|screen\|code\|agent\|annotation. Same return format as Node Search                                                                                                              |
| **Make Agent**           | Compiles screen/widget/agent → creates .remix → deploys to workspace. See sub-page for full options                                                                                                                            |
| **Get Module Signature** | Returns in- & out-params of a module                                                                                                                                                                                           |
| **ArtifactSaveAs**       | Brings up 'Save As' modal; all fields configurable. `autosave=true` skips modal if one lib + name provided. Returns share URL on success, error string on cancel                                                               |
| **ArtifactSave**         | Like ArtifactSaveAs but for 'Save' modal. `autosave=true` skips modal if name provided                                                                                                                                         |

### Mix Macro Module Commands

```
// Clipboard
macro.copy(ndNames)
macro.paste()
macro.pasteContent(json-content)           // {command:"PasteContent", content, gridPos, collapsed}

// Nodes
macro.createNode(ndName, ndType)
macro.createNodeFromExternal(ndName, format, content)  // format: "json" (creates data node)
macro.createNodeFromAst(ndName, ast)       // see AST examples below
macro.moveNode(ndName, x, y)
macro.cloneNode(srcNdName, dstNdName)
macro.deleteNode(ndName)
macro.renameNode(oldNdName, newNdName)
macro.replaceNode(nameOrKey, ...)
macro.setRootNode(ndName)
macro.addAnnotation(ndName, annotation)

// Misc
macro.addImport(dbName, modName, nodeName)
macro.createNodeGraphFromMesh(mesh)
macro.noOp()
macro.comment(comment)
macro.renameScreen(screenName)
macro.groupNodes(ndNames, groupName)

// Bindings
macro.addBinding(ndName, path, bdType, direction)   // direction: "in"/"out"
macro.deleteBinding(ndName, bdName, direction)      // DataTee only
macro.addConnection(srcNdName, srcBdName, dstNdName, dstBdName)
macro.autoConnect(srcNdName, srcBdName, dstNdName)
macro.getDefaultValue(ndName, bdName)
macro.renameBinding(ndName, oldBdName, newBdName)
macro.invokeAction(ndName, bdName)
macro.setDefaultValue(ndName, bdName, value)        // absorbing
macro.absorbBinding(ndName, bdName)                 // absorbs static/AST value

// Components
macro.convertToComponent(ndNames, compName)
macro.editComponent(ndName)   // same as clicking "edit component" in builder
macro.doneEdit()              // same as clicking "done" after editing

// DEPRECATED
macro.absorbValue(ndName, bdName, value)  // use setDefaultValue or absorbBinding instead
```

### Node Types (ndType)

`data/in params`, `data/out params`, `data/scalar`, `data/object`, `data/list objects`, `data/list scalars`, `card`, `query`, `decision`, `component`, `action`, `function`

### Binding Types (bdType)

`string`, `number`, `bool`, `date`, `color`, `url`, `image`, `icon`, `ref`, `email`, `card`, `event`, `location`, `data`
Lists: `["ref"]`, `["string"]`, `[["string"]]`
Objects: `{}`, `{"first": "string", "last": "string"}`

### Operator Values

`==`, `!=`, `like`, `>`, `<`, `>=`, `<=`, `exists`, `not exists`, `StringContains`, `ArrayContains`, `ContainsAll`, `ContainsAny`, `MemberOf`

### createNodeFromAst — Function Example (Dec 2025)

```
macro.createNodeFromAst("ai-func", {
  "type": "function",
  "lambda": "fn(x)",
  "helpers": "def fn(x) = x + 1",
  "bindings": [{"name": "x", "type": "number", "value": 0}]
})
```

---

## External Actions

> Source: [External Actions](https://www.notion.so/2161d464528f8014ac9ce7eda3a134ab)
> Parent: Remix Studio User Guide
> **Note:** Moving to **Client Actions** (preferred — better builder support + error handling by default). Ask dev team to convert Host Effects to Client Actions.

Mechanism for the Remix runtime to communicate with the local embedding environment (browser on desktop, or Flutter with native app).

### Pattern

```javascript
rmx_init({flags, node, onEvent});
// onEvent: { actionName: (args, coordinates, cb) => cb(returnValue) }
```

Each external action is an async local function call: identified by name (string), receives params (any type), returns value via `cb`.

In Studio: use `External Actions` action tile at L2.

### Default External Actions

| Name                         | Params                         | Returns                             | Notes                                                                                                                                         |
|------------------------------|--------------------------------|-------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| `remix/test`                 | string                         | string (echo)                       | Tests wiring                                                                                                                                  |
| `remix/download-remix-file`  | `{manifest, filename}`         | bool                                | Downloads .remix; opens share sheet on iOS                                                                                                    |
| `remix/download-file`        | `{url, filename}`              | bool                                | Downloads file; supports `data:` URIs                                                                                                         |
| `remix/ipc`                  | `{channel, params}`            | varies                              | Generic inter-process communication (electron + mobile)                                                                                       |
| `remix/logout`               | url? (post-logout destination) | —                                   | Logs out; default → `/_rmx_home/home`                                                                                                         |
| `remix/keyboard`             | list string (key combos)       | string (combo pressed)              | Key listener via ctrl-keys lib. Format: `{modifiers}+{char}`. Blocked in: input/textarea focus, selected text, Monaco editor, contentEditable |
| `remix/check-limits`         | none                           | bool (always true)                  | Shows soft/hard limit toasts/modals                                                                                                           |
| `remix/get-messaging-status` | none                           | "default"\|"rejected"\|token string | Push notification permission status                                                                                                           |

### Mobile External Actions

| Name                                | Params                                     | Returns                                                      | Platform                           |
|-------------------------------------|--------------------------------------------|--------------------------------------------------------------|------------------------------------|
| `remix/mobile/permissions/location` | none                                       | denied\|deniedForever\|whileInUse\|always\|unableToDetermine | Mobile                             |
| `remix/mobile/open_drawer`          | none                                       | —                                                            | Mobile                             |
| `remix/wipedb`                      | url?                                       | —                                                            | Mobile — wipes DB then logs out    |
| `remix/mobile/reload-widgets`       | none                                       | bool                                                         | Mobile                             |
| `remix/mobile/donate-intent`        | `{title, url}`                             | bool                                                         | iOS — Shortcuts/home screen intent |
| `remix/mobile/add-to-siri`          | `{title, url, phrase?}`                    | bool                                                         | iOS — Siri shortcut registration   |
| `remix/mobile/widget-debugger`      | none                                       | bool                                                         | iOS — debug/testing only           |
| `remix/mobile/quicklook-open`       | none                                       | bool                                                         | iOS                                |
| `remix/mobile/share-navbar`         | `{save-enabled, main-title}`               | bool                                                         | iOS — sharesheet navbar config     |
| `remix/mobile/share-close`          | none                                       | bool                                                         | iOS                                |
| `remix/mobile/share-invoke-agent`   | `{db, agent, params (JSON string)}`        | `{success, error}`                                           | iOS                                |
| `remix/mobile/share-render`         | `{scene, filename, width, height, format}` | bool                                                         | iOS — renders card as png/pdf      |
| `remix/mobile/share-widget-render`  | `{id, size, filename, format}`             | bool                                                         | iOS — renders widget as png/pdf    |
| `remix/mobile/write-nfc`            | `{url}`                                    | —                                                            | iOS — writes URL to NFC tag        |
| `remix/mobile/esc-pos-print`        | `{printer url, printer port, commands[]}`  | `{ok}\|{error}`                                              | iOS + Android                      |

**ESC-POS print command types:** `cut`, `feed`, `empty`, `hr`, `beep`, `qrcode`, `image`, `text`, `row`
Row cols: sum of `width` values must equal **12**.

### Local Storage External Actions

Keys namespaced with `rmx-local-data--` prefix.

| Name                              | Params         | Returns                                               |
|-----------------------------------|----------------|-------------------------------------------------------|
| `remix/local-storage/get-item`    | string (key)   | `{tag:"success", value}` \| `{tag:"error", message}`  |
| `remix/local-storage/set-item`    | `{key, value}` | `{tag:"success"}` \| `{tag:"error"}`                  |
| `remix/local-storage/remove-item` | string (key)   | `{tag:"success"}` \| `{tag:"error"}`                  |
| `remix/local-storage/list-keys`   | none           | `{tag:"success", value: [keys]}` (namespace stripped) |

### Payment External Actions

| Name                            | Params            | Returns                                           |
|---------------------------------|-------------------|---------------------------------------------------|
| `remix/store/current-plan`      | none              | `{plan: basic\|monthly\|annual, txDate, expDate}` |
| `remix/store/purchase`          | `monthly\|annual` | bool (whether store popup shown)                  |
| `remix/store/restore-purchases` | none              | bool                                              |

### Unstable (may be removed/changed)

| Name                | Params        | Returns |
|---------------------|---------------|---------|
| `remix/send-beacon` | `{url, data}` | bool    | Browser `navigator.sendBeacon` wrapper |
